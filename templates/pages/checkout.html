{% extends 'layouts/main.html' %}
{% block title %}Checkout{% endblock %}
{% block page_header %}{{ super() }}{% endblock %}
{% block content %}

<section class="mainContent full-width clearfix">
	<div class="container">

		<div class="row">
			<div class="col-xs-12">

				<ul class='checkout-items' data-total-price="{{total_price}}">
					{% for item_id in basket %}
						{% set product = products[basket[item_id]["product_id"]] %}
						<li data-product-id="{{product.id}}" data-product-price="{{product.price}}">{{ product.name }} @ {{ product.price|float|currency }}</li>
					{% endfor %}
					<li><strong>Total: {{ total_price|currency }}</strong></li>
				</ul>

				<div class="stripe-form">
					<form action="/paymentcomplete" method="POST">
					  <script
					    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
					    data-key="pk_test_HnEn2PmpAK2CcTIgouF9UOvj"
					    data-amount="{{(total_price | float) * 100}}"
					    data-name="blue{shift} Coding"
					    data-description="Creating coding for creative kids"
					    data-image="https://s3.amazonaws.com/stripe-uploads/acct_17Qz37HP8IoqDW11merchant-icon-1452255057982-happy128.png"
					    data-locale="auto"
					    data-currency="gbp">
					  </script>
					</form>
				</div>

			</div>
		</div>
	</div>
</section>


{% endblock %}
