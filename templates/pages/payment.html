{% extends 'layouts/main.html' %}
{% block title %}Shopping basket{% endblock %}
{% block page_header %}{{ super() }}{% endblock %}
{% block content %}

{% macro render_field(field) %}
	<span style="display:none;">{{ field(**kwargs)|safe }}</span>
{% endmacro %}


<section class="mainContent full-width clearfix">
	<div class="container">

		<div class="row">
			<div class="col-xs-12">

				<p>Total to pay: {{ total_price|currency }} </p>
				<form class="checkout-form" action="/processpayment" method="POST">
					<div>
						{% for field in form %}
							{{ render_field(field) }}
						{% endfor %}
					</div>

					<script
						src="https://checkout.stripe.com/checkout.js" class="stripe-button"
						data-key="{{ stripe_publishable_key }}"
						data-amount="{{(total_price | float) * 100}}"
						data-name="blue{shift} Coding"
						data-description="Creating coding for creative kids"
						data-image="https://s3.amazonaws.com/stripe-uploads/acct_17Qz37HP8IoqDW11merchant-icon-1452255057982-happy128.png"
						data-locale="auto"
						data-currency="gbp">
					</script>
				</form>

			</div>
		</div>
	</div>
</section>


{% endblock %}
