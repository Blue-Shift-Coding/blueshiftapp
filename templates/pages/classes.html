{% extends 'layouts/main.html' %}
{% block title %}our courses{% endblock %}
{% block page_header %}{{ super() }}{% endblock %}
{% block content %}


<section class="mainContent full-width clearfix">
	<div class="container">
		<div class="row">
			<div class="col-xs-12 filters">

				{% if class_filters and class_filters|length >0  %}
				<span class="filters-label">Filter</span>
				{% endif %}

				{% for filter in class_filters %}
					<div class="dropdown classes-filter" data-filtername="{{ filter.category.name.lower() }}" data-defaultvalue="" data-defaultlabel="All {{ filter.category.name }}">
					  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenuFilter{{ filter.category.name }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
						<span class="selected-item" data-filtervalue=""></span>
						<span class="caret"></span>
					  </button>
					  <ul class="dropdown-menu" aria-labelledby="dropdownMenuFilter{{ filter.category.name }}">
						<li><a href="#" class="default-option"></a></li>
						<li role="separator" class="divider"></li>
						{% for option in filter.child_categories %}
						<li><a href="javascript:void(0)" data-filtervalue="{{ option.name }}">{{ option.name }}</a></li>
						{% endfor %}
					  </ul>
					</div>
				{% endfor %}

			</div>
		</div>
		<div class="row">
			<div class="col-xs-12 classes-results">

				{% for product in products %}

					{% set color_number = {'value': 4} %}
					{% for meta_datum in product.meta_data %}
						{% if meta_datum.key == 'age_group' %}
							{% set ages = meta_datum.value|integers %}
							{% if ages == '56' %}
								{% set _dummy = color_number.update({'value': 1}) %}
							{% elif ages == '78' %}
								{% set _dummy = color_number.update({'value': 2}) %}
							{% elif ages == '910' %}
								{% set _dummy = color_number.update({'value': 3}) %}
							{% else %}
								{% set _dummy = color_number.update({'value': 4}) %}
							{% endif %}
						{% endif %}
					{% endfor %}
					{% set color_number = color_number.value %}

					{% set product_url = '/class/'+product.slug %}

					<div class="media courseList couresListPage">
						<a class="media-left border-color-{{ color_number }}" href="{{ product_url }}">
							<img class="media-object" src="{{ product.images[0].src }}" alt="Image">
							<span class="sticker bg-color-{{ color_number }}">&pound;{{product.price}}</span>
						</a>
						<div class="media-body">
							<h3 class="media-heading"><a href="{{ product_url }}" class="color-{{ color_number }}">{{product.name}}</a></h3>

							{{product.short_description|safe}}

							<ul class="list-inline btn-yellow btnPart">
								<li>
									<form action="/cart" method="POST">
										<input type="hidden" name="product_id" value="{{ product.id }}" />
										<button class="btn btn-primary ">Book now</button>
									</form>
								</li>
								<li>
									<a href="{{ product_url }}" class="btn btn-primary read-more-button">Read more</a>
								</li>
							</ul>

						</div>
					</div>
				{% endfor %}
			</div>
		</div>
	</div>
</section>


{% endblock %}
